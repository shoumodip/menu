#!/bin/sh

list_exec() {
  CACHE_PATH=~/.cache/menu_cache

  IFS=:
  if [ -f $CACHE_PATH ]; then
    cat $CACHE_PATH
  else
    stest -flx $PATH | sort -u | tee $CACHE_PATH
  fi
}

if [ -z $1 ]; then
  echo "Usage: $0 <path-to-menu-executable>"
else
  list_exec | $1 | sh &
fi
